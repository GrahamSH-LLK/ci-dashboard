<script type="module">
  import { Octokit } from "https://cdn.skypack.dev/@octokit/rest";
  const octokit = new Octokit();
  const owner = 'uccser';
  var repos = {
    'csfg': 'cs-field-guide',
    'csu': 'cs-unplugged',
    'codewof': 'codewof',
    'dthm': 'dthm4kaiako',
  };

  const latestWorkflowRun = octokit.actions
    .listWorkflowRuns({
      owner: owner,
      repo: repos.csfg,
      workflow_id: 2989095,
      per_page: 1
    })
    .then(({ data }) => {
      // workflowObject = data.workflow_runs[0];
      console.log(data.workflow_runs[0]);
      // console.log(workflowObject);
      // document.getElementById("repo-name").append(repos.csfg);
      // document.getElementById("branch").append(data.workflow_runs[0].head_branch);
      document.getElementById("commit-hash").append((data.workflow_runs[0].head_commit.id).substring(0, 6));
      document.getElementById("status").append(data.workflow_runs[0].status);
      document.getElementById("triggerer").append(data.workflow_runs[0].head_commit.author.name);
      // document.getElementById("conclusion").append(data.workflow_runs[0].conclusion);
    })
    .catch(error => {
      console.log(error);
    });
</script>
